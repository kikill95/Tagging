webpackJsonp([0],{167:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(24),l=n.n(a),s=n(23),c=(n.n(s),n(78)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={tags:[{id:"id_1",title:"Lorem Ipsum",x:200,y:200,index:0},{id:"id_2",title:"Lorem",x:200,y:300,index:1},{id:"id_3",title:"Lorem ipsum dolor sit amet, consectetur adipiscing elit",x:100,y:100,index:1}]},n.maxLength=20,n.onReplace=n.onReplace.bind(n),n.onDelete=n.onDelete.bind(n),n}return r(t,e),p(t,[{key:"onReplace",value:function(e,t,n){n&&this.setState({tags:n})}},{key:"onDelete",value:function(e,t,n){n&&this.setState({tags:n})}},{key:"render",value:function(){return l.a.createElement(c.a,{image:"./image.jpg",width:"512px",height:"512px",tags:this.state.tags,onReplace:this.onReplace,onDelete:this.onDelete,maxLength:this.maxLength})}}]),t}(a.PureComponent);t.default=u,n.i(s.render)(l.a.createElement(u,null),document.getElementById("react-app"))},78:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(24),l=n.n(a),s=n(23),c=n.n(s),p=n(79),u=(n.n(p),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}()),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={chosenIndex:null},n.clickedTime=null,n.deleteTag=n.deleteTag.bind(n),n.hideAllDeletes=n.hideAllDeletes.bind(n),n}return r(t,e),u(t,[{key:"hideAllDeletes",value:function(){[].forEach.call(c.a.findDOMNode(this.refs["tagging-wrapper"]).querySelectorAll(".delete"),function(e){e.classList.add("hide")})}},{key:"deleteTag",value:function(e,t){this.hideAllDeletes(),this.setState({chosenIndex:null}),this.props.onDelete(e,t,this.props.tags.filter(function(e,n){return n!==t}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"tagging-wrapper",style:{backgroundImage:"url("+this.props.image+")",width:this.props.width,height:this.props.height},ref:"tagging-wrapper",onClick:function(){e.hideAllDeletes(),e.setState({chosenIndex:null})}},this.props.tags.map(function(t,n){var o=!1,i=function(e){e.stopPropagation(),o=!0,document.addEventListener("mousemove",r,!1),document.addEventListener("touchmove",r,!1)},r=function(i){if(i.preventDefault(),i.stopPropagation(),o&&e.state.chosenIndex===n){var r=c.a.findDOMNode(e.refs[n]);if(r){var a=c.a.findDOMNode(e.refs["tagging-wrapper"]).getBoundingClientRect(),l=r.getBoundingClientRect();r.style.cursor="-webkit-grabbing",r.style.cursor="grabbing",i.changedTouches&&(i.clientX=i.changedTouches[0].clientX,i.clientY=i.changedTouches[0].clientY),a.left+l.width/2>i.clientX?t.x=0:a.left+a.width-l.width/2<i.clientX?t.x=a.width-l.width:(t.x=parseFloat(r.style.left)+i.clientX-(l.left+l.width/2),t.x-=window.scrollX),a.top+l.height/2>i.clientY?t.y=0:a.top+a.height-l.height/2<i.clientY?t.y=a.height-l.height:(t.y=parseFloat(r.style.top)+i.clientY-(l.top+l.height/2),t.y-=window.scrollY);var s=r.querySelector(".delete");a.left+a.width-l.width/2<i.clientX+s.getBoundingClientRect().width?s.classList.add("pull-left"):s.classList.remove("pull-left"),r.style.left=t.x+"px",r.style.top=t.y+"px"}}},a=function(i){i.stopPropagation();var a=c.a.findDOMNode(e.refs[n]);a.style.cursor="",e.props.onReplace(t,n,e.props.tags.map(function(e,t){return t===n&&(e.x=parseFloat(a.style.left),e.y=parseFloat(a.style.top)),e})),o=!1,document.removeEventListener("mousemove",r,!1),document.removeEventListener("touchmove",r,!1)};return l.a.createElement("div",{className:"tagging-element "+(e.state.chosenIndex===n?"grab-mode":""),key:t.id,ref:n,style:{zIndex:t.index,left:t.x,top:t.y},onClick:function(t){t.stopPropagation(),e.state.chosenIndex!==n&&(e.hideAllDeletes(),e.setState({chosenIndex:n}),c.a.findDOMNode(e.refs[n]).querySelector(".delete").classList.remove("hide")),(new Date).getTime()-e.clickedTime<600&&(e.hideAllDeletes(),e.setState({chosenIndex:null})),e.clickedTime=(new Date).getTime()},onMouseDown:i,onTouchStart:i,onMouseUp:a,onTouchEnd:a},l.a.createElement("span",{className:"tagging-title"},t.title.length+3>e.props.maxLength?t.title.slice(0,e.props.maxLength-3)+"...":t.title),l.a.createElement("span",{className:"delete hide",onClick:function(o){o.stopPropagation(),e.deleteTag(t,n)}},"X"))}))}}]),t}(a.PureComponent);d.defaultProps={image:"",width:"400px",height:"400px",tags:[],onReplace:Function.prototype,onDelete:Function.prototype,maxLength:16},d.propTypes={image:a.PropTypes.string,width:a.PropTypes.string,height:a.PropTypes.string,tags:a.PropTypes.arrayOf(a.PropTypes.shape({id:a.PropTypes.string,title:a.PropTypes.string,x:a.PropTypes.number,y:a.PropTypes.number,index:a.PropTypes.number})),onReplace:a.PropTypes.func,onDelete:a.PropTypes.func,maxLength:a.PropTypes.number},t.a=d},79:function(e,t){}},[167]);
//# sourceMappingURL=main.js.map