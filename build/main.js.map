{"version":3,"sources":["webpack:///./main.js","webpack:///./source/index.js","webpack:///./source/index.scss"],"names":["App","props","state","maxLength","tags","id","title","x","y","index","onReplace","bind","onDelete","element","array","setState","render","document","getElementById","Tagging","chosenIndex","deleteTag","hideAllDeletes","forEach","call","ReactDOM","findDOMNode","refs","querySelectorAll","classList","add","tag","filter","ind","backgroundImage","image","width","height","map","canMove","startMoving","processMoving","ref","wrapper","getBoundingClientRect","boundingClientRect","style","cursor","left","event","pageX","parseFloat","top","pageY","deleteElement","querySelector","remove","stopMoving","zIndex","stopPropagation","length","slice","defaultProps","Function","prototype","propTypes","PropTypes","string","arrayOf","shape","number","func"],"mappings":"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","file":"main.js","sourcesContent":["'use strict';\n\nimport React, { PureComponent } from 'react';\nimport { render } from 'react-dom';\n\nimport Tagging from './source/index';\n\nexport default class App extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      maxLength: 20,\n      tags: [\n        {\n          id: 'id_1',\n          title: 'Lorem Ipsum',\n          x: 200,\n          y: 200,\n          index: 0\n        },\n        {\n          id: 'id_2',\n          title: 'Lorem',\n          x: 200,\n          y: 300,\n          index: 1\n        },\n        {\n          id: 'id_3',\n          title: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',\n          x: 100,\n          y: 100,\n          index: 1\n        }\n      ]\n    };\n\n    this.onReplace = this.onReplace.bind(this);\n    this.onDelete = this.onDelete.bind(this);\n  }\n\n  onReplace(element, index, array) {\n    if (array) {\n      this.setState({tags: array});\n    }\n  }\n\n  onDelete(element, index, array) {\n    if (array) {\n      this.setState({tags: array});\n    }\n  }\n\n  render() {\n    return (\n      <Tagging\n        image={'./image.jpg'}\n        width={'512px'}\n        height={'512px'}\n        tags={this.state.tags}\n        onReplace={this.onReplace}\n        onDelete={this.onDelete}\n        maxLength={this.state.maxLength}\n      />\n    );\n  }\n}\n\nrender(\n    <App/>,\n    document.getElementById('react-app')\n);\n\n\n\n// WEBPACK FOOTER //\n// ./main.js","'use strict';\n\nimport React, { PureComponent, PropTypes } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.scss';\n\nexport default class Tagging extends PureComponent {\n  static defaultProps = {\n    image: '',\n    width: '400px',\n    height: '400px',\n    tags: [],\n    onReplace: Function.prototype,\n    onDelete: Function.prototype,\n    maxLength: 16\n  };\n\n  static propTypes = {\n    image: PropTypes.string,\n    width: PropTypes.string,\n    height: PropTypes.string,\n    tags: PropTypes.arrayOf(PropTypes.shape({\n        id: PropTypes.string,\n        title: PropTypes.string,\n        x: PropTypes.number,\n        y: PropTypes.number,\n        index: PropTypes.number\n    })),\n    onReplace: PropTypes.func,\n    onDelete: PropTypes.func,\n    maxLength: PropTypes.number\n  };\n\n  constructor(props) {\n      super(props);\n\n      this.state = {\n        chosenIndex: null\n      };\n\n      this.deleteTag = this.deleteTag.bind(this);\n      this.hideAllDeletes = this.hideAllDeletes.bind(this);\n  }\n\n  hideAllDeletes() {\n    [].forEach.call(ReactDOM.findDOMNode(this.refs['tagging-wrapper']).querySelectorAll('.delete'), element => {\n      element.classList.add('hide');\n    });\n  }\n\n  deleteTag(tag, index) {\n    this.hideAllDeletes();\n    this.setState({chosenIndex: null});\n    this.props.onDelete(tag, index, this.props.tags.filter((tag, ind) => ind !== index));\n  }\n\n  render() {\n      return (\n        <div\n          className={'tagging-wrapper'}\n          style={{\n            backgroundImage: `url(${this.props.image})`,\n            width: this.props.width,\n            height: this.props.height,\n          }}\n          ref='tagging-wrapper'\n          onClick={() => {\n            this.hideAllDeletes();\n            this.setState({chosenIndex: null});\n          }}\n        >\n          {this.props.tags.map((tag, index) => {\n            // closure veriables\n            let canMove = false;\n            let startMoving = event => {\n              canMove = true;\n            };\n            let processMoving = event => {\n              if (canMove && this.state.chosenIndex === index) {\n                let ref = ReactDOM.findDOMNode(this.refs[index]);\n                if (ref) {\n                  let wrapper = ReactDOM.findDOMNode(this.refs['tagging-wrapper']).getBoundingClientRect(),\n                    boundingClientRect = ref.getBoundingClientRect();\n                  ref.style.cursor = '-webkit-grabbing';\n                  ref.style.cursor = 'grabbing';\n                  // handle borders\n                  if (wrapper.left + boundingClientRect.width / 2 > event.pageX) {\n                    tag.x = 0;\n                  } else if (wrapper.left + wrapper.width - boundingClientRect.width / 2 < event.pageX) {\n                    tag.x = wrapper.width - boundingClientRect.width;\n                  } else {\n                    tag.x = parseFloat(ref.style.left) + event.pageX - (boundingClientRect.left + boundingClientRect.width / 2);\n                  }\n                  if (wrapper.top + boundingClientRect.height / 2 > event.pageY) {\n                    tag.y = 0;\n                  } else if (wrapper.top + wrapper.height - boundingClientRect.height / 2 < event.pageY) {\n                    tag.y = wrapper.height - boundingClientRect.height;\n                  } else {\n                    tag.y = parseFloat(ref.style.top) + event.pageY - (boundingClientRect.top + boundingClientRect.height / 2);\n                  }\n\n                  // handle .delete position\n                  let deleteElement = ref.querySelector('.delete');\n                  if (wrapper.left + wrapper.width - boundingClientRect.width / 2 < event.pageX + deleteElement.getBoundingClientRect().width) {\n                    deleteElement.classList.add('pull-left');\n                  } else {\n                    deleteElement.classList.remove('pull-left');\n                  }\n\n                  // set values\n                  ref.style.left = tag.x + 'px';\n                  ref.style.top = tag.y + 'px';\n                }\n              }\n            };\n            let stopMoving = event => {\n              let ref = ReactDOM.findDOMNode(this.refs[index]);\n              ref.style.cursor = '';\n              this.props.onReplace(tag, index, this.props.tags.map((tag, ind) => {\n                if (ind === index) {\n                  tag.x = parseFloat(ref.style.left);\n                  tag.y = parseFloat(ref.style.top);\n                }\n                return tag;\n              }));\n              canMove = false;\n            };\n            return (\n              <div\n                className={`tagging-element ${this.state.chosenIndex === index ? 'grab-mode' : ''}`}\n                key={tag.id}\n                ref={index}\n                style={{\n                  zIndex: tag.index,\n                  left: tag.x,\n                  top: tag.y\n                }}\n                onClick={event => {\n                  event.stopPropagation();\n                  this.hideAllDeletes();\n                  this.setState({chosenIndex: index});\n                  ReactDOM.findDOMNode(this.refs[index]).querySelector('.delete').classList.remove('hide');\n                }}\n                onMouseDown={startMoving}\n                onMouseMove={processMoving}\n                onMouseUp={stopMoving}\n                onMouseLeave={stopMoving}\n              >\n                <span\n                  className={'title'}\n                >\n                  {tag.title.length + 3 > this.props.maxLength ? tag.title.slice(0, this.props.maxLength - 3) + '...' : tag.title}\n                </span>\n                <span\n                  className={'delete hide'}\n                  onClick={event => {\n                    event.stopPropagation();\n                    this.deleteTag(tag, index);\n                  }}\n                >X</span>\n              </div>\n            );\n          })}\n        </div>\n      );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./source/index.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/index.scss\n// module id = 82\n// module chunks = 0"],"sourceRoot":""}